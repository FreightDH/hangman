(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();let i=!0;const g=(r=300)=>{const t=document.querySelector("body");if(i){const o=document.querySelectorAll("[data-lp]");setTimeout(()=>{for(let e=0;e<o.length;e++){const n=o[e];n.style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")},r),i=!1,setTimeout(()=>{i=!0},r)}},_=(r=300)=>{const t=document.querySelector("body");if(i){const o=document.querySelectorAll("[data-lp]");for(let e=0;e<o.length;e++){const n=o[e];n.style.paddingRight=`${window.innerWidth-document.querySelector(".wrapper").offsetWidth}px`}t.style.paddingRight=`${window.innerWidth-document.querySelector(".wrapper").offsetWidth}px`,document.documentElement.classList.add("lock"),i=!1,setTimeout(()=>{i=!0},r)}},u=r=>{r&&i&&(_(),r.classList.add("popup-open"),r.addEventListener("click",t=>{t.target.closest(".popup__content")||p(t.target.closest(".popup"))}))},p=r=>{i&&(g(),r.classList.remove("popup-open"))},m=(r="win")=>{const t=document.querySelector(".popup__icon"),o=document.querySelector(".popup__message"),e=document.querySelector(".popup__answer span");switch(r){case"win":{t.innerHTML='<img src="img/win.svg" alt="win-icon" />',o.textContent="Congratulations! You won!";break}case"lose":{t.innerHTML='<img src="img/lose.svg" alt="lose-icon" />',o.textContent="Oh no, you lost!";break}}e.textContent=window.currentWord},a=(r="div",t="",o="")=>{const e=document.createElement(r);return e.className=`${t}`,e.innerHTML=`${o}`,e},L=(r,t)=>Math.floor(Math.random()*(t-r+1))+r,y=(r,t)=>{const o=r.textContent,e=window.currentWord.toUpperCase().split("");if(e.includes(o))e.forEach((n,s)=>{o===n&&(t[s].textContent=o,window.inputLettersCount++,console.log("increment"))});else{const n=document.querySelector(".game__counter span"),s=n.textContent,c=document.querySelector(".man__wrapper");n.textContent=+s+1,c.children[s].classList.add("active")}},w=()=>{if(+document.querySelector(".game__counter span").textContent===6){const o=document.querySelector(".popup");m("lose"),u(o),window.isLost=!0}},f=()=>{if(Array.from(document.querySelectorAll(".letter__text")).map(t=>t.textContent).join("").toLowerCase()===window.currentWord){const t=document.querySelector(".popup");m("win"),u(t)}};//! TODO: добавить флаг, показывающий, что слово уже было
const d={closure:"A function value that references variables from outside its body.",frontend:"Development of the graphical user interface of a website.",hoisting:"A mechanism in JavaScript in which variables and function declarations are moved to the top of their scope before the code is executed.",pending:"Promise start condition.",promise:"What the fetch() method returns?",capturing:"A phase when the event goes down to the element.",shift:"A method that removes the first element from an array and returns its value.",await:"Operator that is used to wait for Promise to end.",arrow:"A shorter syntax for a function which doesn't have its own this, arguments, super, or new.target.",cookie:"A piece of data that is stored on your computer to be accessed by your browser."},b=()=>{const r=document.querySelector(".game__word"),t=document.querySelector(".game__hint"),o=document.querySelector(".game__counter"),e=window.currentWord||"",{word:n,question:s}=k(e);r.innerHTML="";for(let c=0;c<n.length;c++){const h=a("div","word__letter",`<div class="letter__text"></div>
<div class="letter__underscore"></div>`);r.appendChild(h)}t.textContent=`Hint: ${s}`,o.innerHTML="Incorrect guesses: <span>0</span> / 6",window.answerLength=n.length,window.inputLettersCount=0},k=r=>{let t=0;do t=L(0,Object.keys(d).length-1);while(Object.keys(d)[t]===r);const o=Object.keys(d)[t],e=d[o];return window.currentWord=o,{word:o,question:e}},v=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],C=["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM"],K=()=>{const r=S(),t=document.querySelector(".keyboard"),o=q(),e=document.querySelector(".man__wrapper");t&&t.remove(),e&&e.remove(),document.querySelectorAll(".game__column")[1].appendChild(r),document.querySelector(".gallows__man").appendChild(o)},S=()=>{const r=document.createElement("div");r.className="game__keyboard keyboard";const t=[];for(let o=0;o<26;o++){const e=document.createElement("div");e.classList.add("keyboard__key"),e.setAttribute("data-code",C[o]),e.textContent=v[o],t.push(e)}for(let o=0;o<3;o+=1){const e=document.createElement("div");switch(e.classList.add("keyboard__row"),o){case 0:{for(let n=0;n<9;n+=1)e.append(t[n]);break}case 1:{for(let n=9;n<18;n+=1)e.append(t[n]);break}case 2:{for(let n=18;n<26;n+=1)e.append(t[n]);break}}r.append(e)}return r},q=()=>{const r=["head","body","hand","hand hand--right","leg","leg leg--right"],t=a("div","man__wrapper");return r.map(o=>{const e=a("div",`man__${o}`,`<img src="img/man/${o.split(" ")[1]||o.split(" ")[0]}.svg" alt="${o.split(" ")[0]}-icon" />`);return t.appendChild(e),e}),t},x=()=>{document.querySelector(".game__keyboard").addEventListener("click",t=>{if(window.inputLettersCount===window.answerLength||window.isLost)return;const o=t.target,e=document.getElementsByClassName("letter__text");o.closest(".keyboard__key")&&!o.classList.contains("disabled")&&(y(o,e),w(),f(),o.classList.add("disabled"))})},E=()=>{const r=document.getElementsByClassName("keyboard__key");document.addEventListener("keydown",t=>{if(window.inputLettersCount===window.answerLength||window.isLost)return;const o=t.code,e=Array.from(r).find(s=>s.dataset.code===o),n=document.getElementsByClassName("letter__text");!e||e.classList.contains("disabled")||(y(e,n),w(),f(),e.classList.add("active"))}),document.addEventListener("keyup",t=>{if(window.isLost)return;const o=t.code,e=Array.from(r).find(n=>n.dataset.code===o);!e||e.classList.contains("disabled")||(e.classList.add("disabled"),e.classList.remove("active"))})},l=()=>{window.answerLength=0,window.inputLettersCount=0,window.currentWord="",window.isLost=!1,K(),b(),x()};window.addEventListener("load",()=>{l(),E(),document.querySelector(".popup__button").addEventListener("click",r=>{const t=r.target.closest(".popup");p(t),l()})});
